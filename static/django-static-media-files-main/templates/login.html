

<!--    AIzaSyCtA_cSETT5UZ6NowGM3wHVowyEbB4_lhg -->
{% load static %}
<!DOCTYPE html>
<html>
	<head>
		<title>Travel Modes in Directions</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
	  
		<link rel="stylesheet" type="text/css" href="{% static 'style2.css' %}">
		<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
		<script src="{% static 'main.js' %}"></script>
	  </head>
	  

	  <body>
		<form method="post">
		  {% csrf_token %}
		  <section class="vh-100" style="background-color: #508bfc;">
			<div class="container py-5 h-100">
			  <div class="row d-flex justify-content-center align-items-center h-100">
				<div class="col-12 col-md-8 col-lg-6 col-xl-5">
				  <div class="card shadow-2-strong" style="border-radius: 1rem;">
					<div class="card-body p-5 text-center">
	  
					  <h3 class="mb-5">Sign in</h3>
	  
					  <div class="form-outline mb-4">
						<input type="text" id="typeEmailX-2" class="form-control form-control-lg" placeholder="Enter Username" name="username">
						<label class="form-label" for="typeEmailX-2">Username</label>
					  </div>
	  
					  <div class="form-outline mb-4">
						<input type="password" id="typePasswordX-2" class="form-control form-control-lg" placeholder="Enter Password" name="password">
						<label class="form-label" for="typePasswordX-2">Password</label>
					  </div>
	  
					  <!-- Checkbox -->
	  
					  <button class="btn btn-primary btn-lg btn-block" type="submit">Login</button>
					  <div>
						<p class="mb-0">Don't have an account? <a href="{% url 'register' %}" class="text-black-50 fw-bold">Sign Up</a>
						</p>
					  </div>
	  
					  <br>
	  
					  <div>
						<p class="mb-0"> <a href="{% url 'admin:index' %}" class="text-black-50 fw-bold">Login as Admin</a>
						</p>
					  </div>
					</div>
				  </div>
				</div>
			  </div>
			</div>
		  </section>
		</form>
	  
		<!-- JavaScript code embedded within the HTML file -->
		<script>
		  // Detect form submission event
		  document.querySelector('form').addEventListener('submit', function() {
			// Remove the beforeunload event listener to prevent premature triggering
			window.removeEventListener('beforeunload', handleBeforeUnload);
		  });
	  
		  // Add the beforeunload event listener
		  window.addEventListener('beforeunload', handleBeforeUnload);
	  
		  // Function to handle the beforeunload event
		  function handleBeforeUnload() {
			// Perform AJAX request to Django logout endpoint
			var xhr = new XMLHttpRequest();
			xhr.open('POST', '/admin/logout/', true);
			xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
			xhr.send();
		  }
	  
		  // Function to get the CSRF token from cookies
		  function getCookie(name) {
			var cookieValue = null;
			if (document.cookie && document.cookie !== '') {
			  var cookies = document.cookie.split(';');
			  for (var i = 0; i < cookies.length; i++) {
				var cookie = cookies[i].trim();
				// Check if the cookie name matches the expected format
				if (cookie.substring(0, name.length + 1) === (name + '=')) {
				  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
				  break;
				}
			  }
			}
			return cookieValue;
		  }
		</script>
	  </body>
</html>



